homework-03

1+. Створити функцію myMap яка буде повторювати функціонал
методу масиву .map
Допускається першим елементом передавати масив.
- Опціонально, створити myMap як метод класу Array який
буде працювати аналогічно map.


2. Створити функцію з колбеком для генерування знижки,
яка поверне свій результат в колбек через 50мс.
Згенерувати знижку випадковим чином в діапазоні від 1 до 99%.
Оскільки магазин не може собі дозволити великі знижки, то якщо знижка буде більше 20 (включно),
функція поверне помилку, інакше поверне значення знижки.
Створити обгортки над функцією з колбеком для полегшення роботи з асинхронними функціями.
 Обгортки мають бути реалізовані двома способами.
Создать модуль discount.js.
+- в модуль добавить функцию generateDiscount с колбеком.
Функция должна работать с задержкой 50мс.
Должна генерировать случайную скидку (1-99%). Скидку возвращать через коллбек,
но  если скидка >= 20% то в колбек должна возвращаться ошибка. Колбеки делать по стандарту
где первый параметр ошибка`(error, result)`.
+- добавить функцию generateValidDiscount с колбеком. Функция должна вызывать generateDiscount
 до тех пор пока не вернётся валидная скидка. Если вернётся ошибка то попробовать снова,
 пока не вернётся скидка.
+- создать функцию-обёртку для generateValidDiscount. Назвать обёртку generateValidDiscountPromise.
 Функция должна вернуть валидную скидку, должна вызываться без параметров, должна возвращать промис.


3. Створити роут та відповідний контролер для розрахунку знижки для кожного товару,
що знаходиться в файлі json та вивести товари в однаковому для всіх вигляді разом зі знижкою,
використовуючи myMap.
Знижка повинна бути для всіх товарів.
Для товарів типу “hat” діє подвійна знижка (згенерувати двічі, знижка множиться).
Для товарів типу “hat” і кольору “red” – потрійна знижка (згенерувати тричі, знижка перемножується).
- Использовать myMap в task3 для приведения к единому виду. Добавить поле discount, по умолчанию 0.
(Обновить task3)
- Создать роут  GET /products/discounts и функцию-контроллер. Функция-контроллер асинхронная
(async/await). Функция должна взять товары из taks3 и сделать всем товарам разную скидку в поле
discount и вернуть эти товары. Нужно будет использовать generateValidDiscountPromise.
myMap можно не использовать, пользуйтесь любым удобным для вас методом for await, promiseAll и т.д.
- Cкидка (discount) для hat генерируется два раза (discount1 + discount2)
- Cкидка (discount) для hat red генерируется три раза (discount1 + discount2 + discount3)

4. Реалізувати пункт 3. трьома способами( callback, promise, async/await), відповідно
на кожен окремий роут.
Для callback способу викликати функцію написану як callback.
- это задание опционально, нужно будет реализовать ещё два варианта на колбеках
и на промисах. Создавать только роут и контроллер, в discount.js ничего менять не нужно,
там уже всё есть.

